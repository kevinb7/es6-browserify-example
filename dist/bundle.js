(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var Point = to5Runtime.interopRequire(require("./point"));

var Circle = to5Runtime.interopRequire(require("./circle"));

var random = function (max) {
  return max * Math.random();
};

var width = window.innerWidth;
var height = window.innerHeight;

Circle.max_x = width;
Circle.max_y = height;

var canvas = document.getElementById("canvas");
Object.assign(canvas, { width: width, height: height });
var ctx = canvas.getContext("2d");

var max_radius = 50;
var count = 100;
var circles = [];

for (var i = 0; i < count; i++) {
  var _map = [width, height, max_radius].map(random);

  var _map2 = to5Runtime.slicedToArray(_map, 3);

  var x = _map2[0];
  var y = _map2[1];
  var radius = _map2[2];
  circles.push(new Circle(new Point(x, y), radius));
}

ctx.fillStyle = "rgba(0,0,255,0.3)";
ctx.strokeStyle = "rgba(0,0,0,0.6)";
ctx.lineWidth = 1;

var drawLine = function (p1, p2) {
  ctx.beginPath();
  ctx.moveTo(p1.x, p1.y);
  ctx.lineTo(p2.x, p2.y);
  ctx.stroke();
};

var drawScene = function () {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  for (var _i = 0; _i < circles.length; _i++) {
    for (var j = 0; j < _i; j++) {
      var _ref = [circles[_i], circles[j]];

      var c1 = _ref[0];
      var c2 = _ref[1];
      var min_dist = circles[_i].radius + circles[j].radius;


      if (c1.center.distanceTo(c2.center) < min_dist) {
        drawLine(c1.center, c2.center);
      }
    }
  }

  for (var _iterator = circles[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {
    var c = _step.value;
    c.draw(ctx);
    c.update();
  }

  requestAnimationFrame(drawScene, canvas);
};

requestAnimationFrame(drawScene, canvas);

},{"./circle":2,"./point":3}],2:[function(require,module,exports){
"use strict";

var Point = to5Runtime.interopRequire(require("./point"));

var Circle = (function () {
  function Circle(center, radius) {
    this.center = center;
    this.radius = radius;
    this.velocity = new Point(2 * Math.random(), 2 * Math.random());
  }

  Circle.prototype.draw = function draw(ctx) {
    var x = this.center.x;
    var y = this.center.y;
    var tau = 2 * Math.PI;

    ctx.beginPath();
    ctx.arc(x, y, this.radius, 0, tau, false);
    ctx.fill();
  };

  Circle.prototype.update = function update() {
    this.center.addTo(this.velocity);
    if (this.center.x > Circle.max_x) {
      this.center.x = Circle.max_x;
      this.velocity.x *= -1;
    }
    if (this.center.y > Circle.max_y) {
      this.center.y = Circle.max_y;
      this.velocity.y *= -1;
    }
    if (this.center.x < Circle.min_x) {
      this.center.x = Circle.min_x;
      this.velocity.x *= -1;
    }
    if (this.center.y < Circle.min_y) {
      this.center.y = Circle.min_y;
      this.velocity.y *= -1;
    }
  };

  return Circle;
})();

Circle.min_x = 0;
Circle.min_y = 0;
Circle.max_x = 512;
Circle.max_y = 512;

module.exports = Circle;

},{"./point":3}],3:[function(require,module,exports){
"use strict";

var Point = (function () {
  function Point(x, y) {
    this.x = x;
    this.y = y;
  }

  Point.prototype.distanceTo = function distanceTo(otherPoint) {
    return this.subtract(otherPoint).length();
  };

  Point.prototype.subtract = function subtract(otherPoint) {
    return new Point(this.x - otherPoint.x, this.y - otherPoint.y);
  };

  Point.prototype.length = function length() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  };

  Point.prototype.addTo = function addTo(otherPoint) {
    this.x += otherPoint.x;
    this.y += otherPoint.y;
  };

  return Point;
})();

module.exports = Point;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMva2V2aW4vZXM2LWJyb3dzZXJpZnktZXhhbXBsZS9zcmMvYXBwLmpzIiwiL1VzZXJzL2tldmluL2VzNi1icm93c2VyaWZ5LWV4YW1wbGUvc3JjL2NpcmNsZS5qcyIsIi9Vc2Vycy9rZXZpbi9lczYtYnJvd3NlcmlmeS1leGFtcGxlL3NyYy9wb2ludC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0lDQU8sS0FBSyxxQ0FBTSxTQUFTOztJQUNwQixNQUFNLHFDQUFNLFVBQVU7O0FBRTdCLElBQUksTUFBTSxHQUFHLFVBQVMsR0FBRyxFQUFFO0FBQ3ZCLFNBQU8sR0FBRyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztDQUM5QixDQUFDOztBQUVGLElBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUM7QUFDOUIsSUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQzs7QUFFaEMsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7QUFDckIsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUM7O0FBRXRCLElBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDL0MsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUwsS0FBSyxFQUFFLE1BQU0sRUFBTixNQUFNLEVBQUUsQ0FBQyxDQUFDO0FBQ3pDLElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRWxDLElBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQztBQUNwQixJQUFJLEtBQUssR0FBRyxHQUFHLENBQUM7QUFDaEIsSUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDOztBQUVqQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxD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QVUsQ0FBQyxDQUFDLENBQUM7QUFDdkIsUUFBSSxDQUFDLENBQUMsSUFBSSxVQUFVLENBQUMsQ0FBQyxDQUFDO0dBQzFCOztTQXJCQyxLQUFLOzs7aUJBd0JJLEtBQUsiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IFBvaW50IGZyb20gXCIuL3BvaW50XCI7XG5pbXBvcnQgQ2lyY2xlIGZyb20gXCIuL2NpcmNsZVwiO1xuXG52YXIgcmFuZG9tID0gZnVuY3Rpb24obWF4KSB7XG4gICAgcmV0dXJuIG1heCAqIE1hdGgucmFuZG9tKCk7ICBcbn07XG5cbnZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xudmFyIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuQ2lyY2xlLm1heF94ID0gd2lkdGg7XG5DaXJjbGUubWF4X3kgPSBoZWlnaHQ7XG5cbnZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbnZhc1wiKTtcbk9iamVjdC5hc3NpZ24oY2FudmFzLCB7IHdpZHRoLCBoZWlnaHQgfSk7XG52YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxudmFyIG1heF9yYWRpdXMgPSA1MDtcbnZhciBjb3VudCA9IDEwMDtcbnZhciBjaXJjbGVzID0gW107XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgIHZhciBbeCwgeSwgcmFkaXVzXSA9IFt3aWR0aCwgaGVpZ2h0LCBtYXhfcmFkaXVzXS5tYXAocmFuZG9tKTtcbiAgICBjaXJjbGVzLnB1c2gobmV3IENpcmNsZShuZXcgUG9pbnQoeCwgeSksIHJhZGl1cykpO1xufVxuXG5jdHguZmlsbFN0eWxlID0gXCJyZ2JhKDAsMCwyNTUsMC4zKVwiO1xuY3R4LnN0cm9rZVN0eWxlID0gXCJyZ2JhKDAsMCwwLDAuNilcIjtcbmN0eC5saW5lV2lkdGggPSAxO1xuXG52YXIgZHJhd0xpbmUgPSBmdW5jdGlvbihwMSwgcDIpIHtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4Lm1vdmVUbyhwMS54LCBwMS55KTtcbiAgICBjdHgubGluZVRvKHAyLngsIHAyLnkpO1xuICAgIGN0eC5zdHJva2UoKTtcbn07XG5cbnZhciBkcmF3U2NlbmUgPSBmdW5jdGlvbigpIHtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaXJjbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaTsgaisrKSB7XG4gICAgICAgICAgICBsZXQgW2MxLCBjMl0gPSBbY2lyY2xlc1tpXSwgY2lyY2xlc1tqXV07XG4gICAgICAgICAgICBsZXQgbWluX2Rpc3QgPSBjaXJjbGVzW2ldLnJhZGl1cyArIGNpcmNsZXNbal0ucmFkaXVzO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChjMS5jZW50ZXIuZGlzdGFuY2VUbyhjMi5jZW50ZXIpIDwgbWluX2Rpc3QpIHtcbiAgICAgICAgICAgICAgICBkcmF3TGluZShjMS5jZW50ZXIsIGMyLmNlbnRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBjIG9mIGNpcmNsZXMpIHtcbiAgICAgICAgYy5kcmF3KGN0eCk7XG4gICAgICAgIGMudXBkYXRlKCk7XG4gICAgfVxuXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGRyYXdTY2VuZSwgY2FudmFzKTtcbn1cblxucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGRyYXdTY2VuZSwgY2FudmFzKTtcbiIsImltcG9ydCBQb2ludCBmcm9tIFwiLi9wb2ludFwiO1xuXG5jbGFzcyBDaXJjbGUge1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKGNlbnRlciwgcmFkaXVzKSB7XG4gICAgICAgIHRoaXMuY2VudGVyID0gY2VudGVyO1xuICAgICAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cztcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBQb2ludCgyICogTWF0aC5yYW5kb20oKSwgMiAqIE1hdGgucmFuZG9tKCkpO1xuICAgIH1cbiAgICBcbiAgICBkcmF3KGN0eCkge1xuICAgICAgICB2YXIgeyB4LCB5IH0gPSB0aGlzLmNlbnRlcjtcbiAgICAgICAgdmFyIHRhdSA9IDIgKiBNYXRoLlBJO1xuICAgICAgICBcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHguYXJjKHgsIHksIHRoaXMucmFkaXVzLCAwLCB0YXUsIGZhbHNlKTtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICB9XG4gICAgXG4gICAgdXBkYXRlKCkge1xuICAgICAgICB0aGlzLmNlbnRlci5hZGRUbyh0aGlzLnZlbG9jaXR5KTtcbiAgICAgICAgaWYgKHRoaXMuY2VudGVyLnggPiBDaXJjbGUubWF4X3gpIHtcbiAgICAgICAgICAgIHRoaXMuY2VudGVyLnggPSBDaXJjbGUubWF4X3g7XG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5LnggKj0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2VudGVyLnkgPiBDaXJjbGUubWF4X3kpIHtcbiAgICAgICAgICAgIHRoaXMuY2VudGVyLnkgPSBDaXJjbGUubWF4X3k7XG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5LnkgKj0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2VudGVyLnggPCBDaXJjbGUubWluX3gpIHtcbiAgICAgICAgICAgIHRoaXMuY2VudGVyLnggPSBDaXJjbGUubWluX3g7XG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5LnggKj0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2VudGVyLnkgPCBDaXJjbGUubWluX3kpIHtcbiAgICAgICAgICAgIHRoaXMuY2VudGVyLnkgPSBDaXJjbGUubWluX3k7XG4gICAgICAgICAgICB0aGlzLnZlbG9jaXR5LnkgKj0gLTE7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkNpcmNsZS5taW5feCA9IDA7XG5DaXJjbGUubWluX3kgPSAwO1xuQ2lyY2xlLm1heF94ID0gNTEyO1xuQ2lyY2xlLm1heF95ID0gNTEyO1xuXG5leHBvcnQgZGVmYXVsdCBDaXJjbGU7XG4iLCJjbGFzcyBQb2ludCB7XG4gICAgY29uc3RydWN0b3IgKHgseSkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgIH1cblxuICAgIGRpc3RhbmNlVG8ob3RoZXJQb2ludCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJ0cmFjdChvdGhlclBvaW50KS5sZW5ndGgoKTtcbiAgICB9XG4gICAgXG4gICAgc3VidHJhY3Qob3RoZXJQb2ludCkge1xuICAgICAgICByZXR1cm4gbmV3IFBvaW50KHRoaXMueCAtIG90aGVyUG9pbnQueCwgdGhpcy55IC0gb3RoZXJQb2ludC55KTtcbiAgICB9XG4gICAgXG4gICAgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSk7XG4gICAgfVxuICAgIFxuICAgIGFkZFRvKG90aGVyUG9pbnQpIHtcbiAgICAgICAgdGhpcy54ICs9IG90aGVyUG9pbnQueDtcbiAgICAgICAgdGhpcy55ICs9IG90aGVyUG9pbnQueTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvaW50O1xuIl19
